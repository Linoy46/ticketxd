<header class="header text-center text-secondary py-4 mb-4">
  <h3>Módulos visibles</h3>
</header>


<div class="container py-3">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <!-- Módulo Autocomplete que muestra el nombre del módulo-->
    <div class="mb-4">
      <p-floatlabel>

      <p-autocomplete
        formControlName="ct_modulo"
        [suggestions]="filteredModules"
        (completeMethod)="filterModule($event)"
        field="nombre_modulo"
        (onSelect)="onModuleSelect($event)"
        class=""
        [style]="{'width':'100%'}"
        [inputStyle]="{'width':'100%'}"
        inputId="over_label"
      />
      <label for="over_label">Agregar módulo</label>
    </p-floatlabel>

    </div>

    <!-- Módulo Autocomplete de tipo hide que guarda el ID del módulo -->
    <div class="mb-4" [hidden]="true">
      <p-autocomplete
        formControlName="ct_modulo_id"
        [suggestions]="filteredModules"
        (completeMethod)="filterModule($event)"
        field="nombre_modulo"
        (onSelect)="onModuleSelect($event)"
      />
    </div>

      <!-- Action Buttons -->
  <div class="d-flex justify-content-between mb-4 mt-4">
    <button
      type="button"
      class="btn btn-outline-secondary w-25 fw-bold"
      (click)="close()"
    >
      Cerrar
    </button>
    <div *ngIf="data?.mode !== 'view'" class="w-25">
      <button
        type="submit"
        class="btn btn-primary w-100 fw-bold"
        [disabled]="form.invalid && data?.mode !== 'view'"
      >
        {{
          data?.mode === "add"
            ? "Agregar"
            : data?.mode === "edit"
            ? "Guardar Cambios"
            : "Ver"
        }}
      </button>
    </div>
  </div>

  </form>


  <div *ngIf="rowData.length > 0" >

    <div class="card text-bg-light mb-3" *ngFor="let moduleArea of rowData; index as i; first as isFirst">
      <div class="card-body container">
        <div class="row align-items-center">
          <div class="col-lg-11 col-">
            <h5 class="card-title text-secondary">{{moduleArea.ct_modulo.nombre_modulo}}</h5>
          </div>
          <div class="col-lg-1">
            <!--
              <button title="Editar" href="#" (click)="edit(moduleArea.id_modulo_area)" class="btn btn-primary me-2"> <i class="bi bi-pencil-fill"></i> </button>
              -->
              <button title="Eliminar" href="#" (click)="delete(moduleArea)" class="btn btn-danger"> <i class="bi bi-trash-fill"></i> </button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div *ngIf="rowData.length === 0">
    <h3 class="text-center fw-lighter mb-4">Sin acceso a módulos</h3>
  </div>

</div>



<!--

  {{data|json}}

  Display Form Data for Debugging
  <div class="mt-4">
    <pre>{{ form.value | json }}</pre>
  </div>

  <div class="card">
    <p-tree [value]="files" selectionMode="checkbox" styleClass="w-full md:w-[30rem]" [(selection)]="selectedFiles" />
  </div>
-->
