<!--Tutorial-->
<app-tutorial [config]="tutorialConfig" buttonText="Ayuda" [showButton]="true">
</app-tutorial>

<div class="ag-wrapper">
  <header class="header text-center text-secondary mb-4">
    <h1>Financiamientos</h1>
  </header>

  <div class="container-fluid">
    <!-- BotÃ³n para agregar registro con estilo mejorado -->
    <div class="mb-3" *ngIf="hasPermission('Financieros:view_add_button')">
      <button
        (click)="openAddDialog()"
        class="btn btn-secondary"
        id="nuevo_fnanciamiento"
      >
        <i class="bi bi-plus-circle"></i> Agregar financiamiento
      </button>
    </div>

    <!-- AG-Grid responsivo -->
    <div
      class="grid-container"
      *ngIf="filteredFinancingData && filteredFinancingData.length > 0"
    >
      <ag-grid-angular
        class="ag-theme-quartz grid-responsive"
        style="
          width: 100%;
          height: 100%;
          border-radius: 8px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        "
        [rowData]="filteredFinancingData"
        [columnDefs]="columnDefs"
        [gridOptions]="gridOptions"
        [pagination]="true"
        [theme]="myTheme"
        (gridReady)="onGridReady($event)"
      >
      </ag-grid-angular>
    </div>

    <!-- Mensaje cuando no hay registros -->
    <h4
      *ngIf="!filteredFinancingData || filteredFinancingData.length === 0"
      class="text-center text-muted fw-lighter"
    >
      Sin registros
    </h4>
  </div>

  <!-- Componente de modal -->
  <shared-custom-modal-component></shared-custom-modal-component>
</div>
